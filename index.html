<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>김동휘 포트폴리오</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body>
    <!-- 상단 제어 패널 -->
    <div class="top-controls">
        <!-- 다크모드 토글 버튼 -->
        <div class="theme-toggle" id="theme-toggle" onclick="toggleTheme()">
            <svg class="sun-icon" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 18C8.686 18 6 15.314 6 12S8.686 6 12 6s6 2.686 6 6-2.686 6-6 6zM12 2a1 1 0 0 1 1 1v2a1 1 0 0 1-2 0V3a1 1 0 0 1 1-1zM21 11h-2a1 1 0 0 1 0-2h2a1 1 0 0 1 0 2zM6 11H4a1 1 0 0 1 0-2h2a1 1 0 0 1 0 2zM16.142 6.343l1.414-1.414a1 1 0 0 1 1.414 1.414L17.556 7.757a1 1 0 0 1-1.414-1.414zM6.343 17.657l-1.414 1.414a1 1 0 0 1-1.414-1.414l1.414-1.414a1 1 0 0 1 1.414 1.414zM12 22a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v2a1 1 0 0 1-1 1zM17.657 17.657a1 1 0 0 1-1.414-1.414L17.657 15a1 1 0 0 1 1.414 1.414l-1.414 1.243z"/>
            </svg>
            <svg class="moon-icon" viewBox="0 0 24 24" fill="currentColor">
                <path d="M21.64 13a1 1 0 0 0-1.05-.14 8.05 8.05 0 0 1-3.37.73 8.15 8.15 0 0 1-8.14-8.1 8.59 8.59 0 0 1 .25-2A1 1 0 0 0 8 2.36a10.14 10.14 0 1 0 14 11.69 1 1 0 0 0-.36-1.05z"/>
            </svg>
        </div>

        <!-- 연결 Agent 상태 표시 -->
        <div class="proxy-status" id="proxy-status" onclick="toggleProxyPanel()">
            <div class="proxy-indicator">
                <div class="status-light" id="status-light"></div>
                <span class="status-text" id="status-text">Agents List</span>
            </div>
            <svg class="dropdown-arrow" viewBox="0 0 24 24" fill="currentColor">
                <path d="M7 10l5 5 5-5z"/>
            </svg>
        </div>

        <!-- 연결 Agent 정보 패널 -->
        <div class="proxy-panel" id="proxy-panel">
            <div class="proxy-panel-header">
                <h3>Agents List</h3>
                <button class="refresh-btn" onclick="refreshProxyStatus()" title="연결 상태 새로고침">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>
                    </svg>
                </button>
            </div>
            <div class="proxy-servers" id="proxy-servers">
                <!-- AI 에이전트 목록이 동적으로 로드됩니다 -->
            </div>
        </div>
    </div>


    <div class="container">
        <div class="main-content">
            <div class="welcome-text">
                <h1 id="welcome-message"></h1>
                <p id="instruction-text"></p>
                
                <div class="quick-buttons" id="quick-buttons" style="display: none;">
                    <button class="quick-btn" onclick="setPromptText('포트폴리오를 보여줘')">포트폴리오</button>
                    <button class="quick-btn" onclick="setPromptText('이력서를 보여줘')">이력서</button>
                    <button class="quick-btn" onclick="setPromptText('기술스택을 알려줘')">기술스택</button>
                    <button class="quick-btn" onclick="setPromptText('블로그를 보여줘')">블로그</button>
                </div>
                
                <!-- 통합 채팅 컨테이너 (입력창 + 채팅창) -->
                <div class="chat-wrapper" id="chat-wrapper" style="display: none;">
                    <!-- 채팅 메시지 영역 (확장시 표시) -->
                    <div class="chat-messages-area" id="chat-messages-area">
                        <div class="chat-header">
                            <span>AI 어시스턴트와 대화</span>
                        </div>
                        <div class="chat-messages-list" id="chat-messages-list"></div>
                    </div>

                    <!-- 입력 영역 (항상 표시) -->
                    <div class="chat-input-area" id="chat-input-area">
                        <input type="text" id="user-input" placeholder="질문이나 원하는 내용을 입력해주세요..." maxlength="1000">
                        <button onclick="handleUserInput()">전송</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 플로팅 채팅 버튼 (전역) -->
    <div class="chat-float-btn" id="chat-float-btn" onclick="openChat()" title="AI 채팅 열기" style="display: none;">
        <svg viewBox="0 0 24 24" fill="currentColor">
            <path d="M20 2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h4l4 4 4-4h4c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"/>
        </svg>
    </div>

    <!-- 채팅창 (전역) -->
    <div class="chat-container" id="chat-container" style="display: none;">
        <div class="chat-header">
            <span>AI 어시스턴트</span>
            <button class="chat-close" onclick="closeChat()" title="채팅창 닫기">×</button>
        </div>
        <div class="chat-messages" id="chat-messages"></div>
        <div class="chat-input">
            <input type="text" id="chat-input" placeholder="궁금한 것을 물어보세요..." maxlength="1000">
            <button onclick="sendChatMessage()">전송</button>
        </div>
    </div>

    <!-- 페이지 콘텐츠 영역 -->
    <div class="page-content" id="page-content" style="display: none;">
        <div class="page-header">
            <button class="back-btn" onclick="goHome()" title="홈으로 돌아가기">← 홈으로</button>
        </div>
        <div class="page-body" id="page-body">
            <!-- 동적으로 콘텐츠가 로드됩니다 -->
        </div>
    </div>

    <script src="js/gradient.js"></script>
    <script src="js/blog.js"></script>
    <script src="js/markdown-loader.js"></script>
    <script src="js/session-manager.js"></script>
    <script src="js/approval-system.js"></script>
    <script src="js/proxy-api.js"></script>
    <script src="js/proxy-status.js"></script>
    <script src="js/navigation.js"></script>
    <script src="js/main.js"></script>
    <script src="js/typing.js"></script>
</body>
</html>